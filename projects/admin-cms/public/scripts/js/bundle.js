(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getFieldValue = (id) => document.getElementById(id).value;

},{}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });

},{}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const request_1 = require("./request");
const helpers_1 = require("./helpers");
const screenshotsParentNode = document.querySelector("#screenshots__list");
const iconParentNode = document.querySelector(".icon");
let iconURL = "";
let screenshotURLs = [];
document
    .querySelector("#screenshots")
    .addEventListener("change", async (e) => {
    const { target: { files } } = e;
    const formData = new FormData();
    for (let i = 0; i < files.length; i++) {
        formData.append("files", files[i]);
    }
    try {
        const response = await request_1.POST("/image/upload", formData);
        const { urls } = await response;
        screenshotURLs = urls;
        drawScreenshotList(screenshotsParentNode, screenshotURLs);
    }
    catch (error) {
        console.error(error);
    }
});
document
    .querySelector("#icon")
    .addEventListener("change", async (e) => {
    const { target: { files } } = e;
    const formData = new FormData();
    formData.append("files", files[0]);
    try {
        const data = await request_1.POST("/image/upload", formData);
        const { urls: [url] } = data;
        iconURL = url;
        drawIcon(iconParentNode, url);
    }
    catch (error) {
        console.error(error);
    }
});
document.querySelector(".new-form").addEventListener("submit", async (e) => {
    e.preventDefault();
    const data = new FormData();
    data.append("title", helpers_1.getFieldValue("title"));
    data.append("description", helpers_1.getFieldValue("description"));
    data.append("google-link", helpers_1.getFieldValue("google-link"));
    data.append("icon", iconURL);
    for (let i = 0; i < screenshotURLs.length; i++) {
        data.append("screenshots", screenshotURLs[i]);
    }
    try {
        await fetch("/project", { body: data, method: "POST" });
    }
    catch (error) {
        console.log(error);
    }
});
const drag = (e, url) => e.dataTransfer.setData("text", JSON.stringify(url));
const drop = (e, currentURL) => {
    e.preventDefault();
    const newURL = JSON.parse(e.dataTransfer.getData("text"));
    const newScreenshotURLS = screenshotURLs.map((url, index) => {
        if (index === newURL.index) {
            return currentURL.url;
        }
        if (index === currentURL.index) {
            return newURL.url;
        }
        return url;
    });
    screenshotURLs = [...newScreenshotURLS];
    drawScreenshotList(screenshotsParentNode, newScreenshotURLS);
};
const drawScreenshotList = (screenshotsNode, urls) => {
    while (screenshotsNode.firstChild) {
        screenshotsNode.removeChild(screenshotsNode.firstChild);
    }
    urls.forEach((url, index) => {
        const node = document.createElement("div");
        const imgNode = document.createElement("img");
        node.classList.add("col-6", "col-md-3", "screenshots__list__item", `screenshots__list__item__${index}`);
        node.draggable = true;
        imgNode.src = url;
        imgNode.alt = "screenshot";
        node.appendChild(imgNode);
        screenshotsNode.appendChild(node);
        document
            .querySelector(`.screenshots__list__item__${index}`)
            .addEventListener("dragstart", (e) => drag(e, { index, url }));
        document
            .querySelector(`.screenshots__list__item__${index}`)
            .addEventListener("drop", (e) => drop(e, { index, url }));
        document
            .querySelector(`.screenshots__list__item__${index}`)
            .addEventListener("dragover", (e) => e.preventDefault());
    });
};
const drawIcon = (iconNode, url) => {
    while (iconNode.firstChild) {
        iconNode.removeChild(iconNode.firstChild);
    }
    const imgNode = document.createElement("img");
    imgNode.classList.add("icon__item");
    imgNode.src = url;
    imgNode.alt = "screenshot";
    iconNode.appendChild(imgNode);
};

},{"./helpers":1,"./request":4}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.POST = (url, data) => fetch(url, {
    method: "POST",
    body: data
}).then(res => res.json());
exports.GET = (url) => fetch(url).then(res => res.json());
exports.PUT = (url, data) => fetch(url, {
    method: "PUT",
    body: data
}).then(res => res.json());
exports.DELETE = (url) => fetch(url, { method: "DELETE" }).then(res => res.json());

},{}]},{},[1,2,3,4])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJwdWJsaWMvc2NyaXB0cy90cy9oZWxwZXJzLnRzIiwicHVibGljL3NjcmlwdHMvdHMvbmV3LXByb2plY3QudHMiLCJwdWJsaWMvc2NyaXB0cy90cy9yZXF1ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNFYSxRQUFBLGFBQWEsR0FBRyxDQUFDLEVBQVUsRUFBRSxFQUFFLENBQ3hDLFFBQVEsQ0FBQyxjQUFjLENBQUMsRUFBRSxDQUFnQyxDQUFDLEtBQUssQ0FBQzs7Ozs7Ozs7O0FDSHJFLHVDQUFpQztBQUVqQyx1Q0FBMEM7QUFFMUMsTUFBTSxxQkFBcUIsR0FBWSxRQUFRLENBQUMsYUFBYSxDQUMzRCxvQkFBb0IsQ0FDckIsQ0FBQztBQUNGLE1BQU0sY0FBYyxHQUFZLFFBQVEsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDaEUsSUFBSSxPQUFPLEdBQVcsRUFBRSxDQUFDO0FBQ3pCLElBQUksY0FBYyxHQUFhLEVBQUUsQ0FBQztBQUVsQyxRQUFRO0tBQ0wsYUFBYSxDQUFDLGNBQWMsQ0FBQztLQUM3QixnQkFBZ0IsQ0FBQyxRQUFRLEVBQUUsS0FBSyxFQUFFLENBQWlCLEVBQUUsRUFBRTtJQUN0RCxNQUFNLEVBQ0osTUFBTSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQ2xCLEdBQUcsQ0FBQyxDQUFDO0lBQ04sTUFBTSxRQUFRLEdBQUcsSUFBSSxRQUFRLEVBQUUsQ0FBQztJQUdoQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNyQyxRQUFRLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUNwQztJQUVELElBQUk7UUFDRixNQUFNLFFBQVEsR0FBRyxNQUFNLGNBQUksQ0FBQyxlQUFlLEVB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R0FBRyxZQUFZLENBQUM7SUFDM0IsUUFBUSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNoQyxDQUFDLENBQUM7Ozs7O0FDbkpXLFFBQUEsSUFBSSxHQUFHLENBQUMsR0FBVyxFQUFFLElBQWMsRUFBRSxFQUFFLENBQ2xELEtBQUssQ0FBQyxHQUFHLEVBQUU7SUFDVCxNQUFNLEVBQUUsTUFBTTtJQUNkLElBQUksRUFBRSxJQUFJO0NBQ1gsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBRWhCLFFBQUEsR0FBRyxHQUFHLENBQUMsR0FBVyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7QUFFMUQsUUFBQSxHQUFHLEdBQUcsQ0FBQyxHQUFXLEVBQUUsSUFBYyxFQUFFLEVBQUUsQ0FDakQsS0FBSyxDQUFDLEdBQUcsRUFBRTtJQUNULE1BQU0sRUFBRSxLQUFLO0lBQ2IsSUFBSSxFQUFFLElBQUk7Q0FDWCxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7QUFFaEIsUUFBQSxNQUFNLEdBQUcsQ0FBQyxHQUFXLEVBQUUsRUFBRSxDQUNwQyxLQUFLLENBQUMsR0FBRyxFQUFFLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgeyBIVE1MSW5wdXRFdmVudCB9IGZyb20gXCIuL2ludGVyZmFjZXNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRGaWVsZFZhbHVlID0gKGlkOiBzdHJpbmcpID0+XHJcbiAgKChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkgYXMgdW5rbm93bikgYXMgSFRNTElucHV0RXZlbnQpLnZhbHVlO1xyXG4iLCJpbXBvcnQgeyBQT1NUIH0gZnJvbSBcIi4vcmVxdWVzdFwiO1xyXG5pbXBvcnQgeyBIVE1MSW5wdXRFdmVudCwgSVNjcmVlbnNob3QgfSBmcm9tIFwiLi9pbnRlcmZhY2VzXCI7XHJcbmltcG9ydCB7IGdldEZpZWxkVmFsdWUgfSBmcm9tIFwiLi9oZWxwZXJzXCI7XHJcblxyXG5jb25zdCBzY3JlZW5zaG90c1BhcmVudE5vZGU6IEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3NjcmVlbnNob3RzX19saXN0XCJcclxuKTtcclxuY29uc3QgaWNvblBhcmVudE5vZGU6IEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmljb25cIik7XHJcbmxldCBpY29uVVJMOiBzdHJpbmcgPSBcIlwiO1xyXG5sZXQgc2NyZWVuc2hvdFVSTHM6IHN0cmluZ1tdID0gW107XHJcblxyXG5kb2N1bWVudFxyXG4gIC5xdWVyeVNlbGVjdG9yKFwiI3NjcmVlbnNob3RzXCIpXHJcbiAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgYXN5bmMgKGU6IEhUTUxJbnB1dEV2ZW50KSA9PiB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIHRhcmdldDogeyBmaWxlcyB9XHJcbiAgICB9ID0gZTtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcblxyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBwcmVmZXItZm9yLW9mXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGZvcm1EYXRhLmFwcGVuZChcImZpbGVzXCIsIGZpbGVzW2ldKTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBPU1QoXCIvaW1hZ2UvdXBsb2FkXCIsIGZvcm1EYXRhKTtcclxuICAgICAgY29uc3QgeyB1cmxzIH0gPSBhd2FpdCByZXNwb25zZTtcclxuICAgICAgc2NyZWVuc2hvdFVSTHMgPSB1cmxzO1xyXG5cclxuICAgICAgZHJhd1NjcmVlbnNob3RMaXN0KHNjcmVlbnNob3RzUGFyZW50Tm9kZSwgc2NyZWVuc2hvdFVSTHMpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG5kb2N1bWVudFxyXG4gIC5xdWVyeVNlbGVjdG9yKFwiI2ljb25cIilcclxuICAuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBhc3luYyAoZTogSFRNTElucHV0RXZlbnQpID0+IHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgdGFyZ2V0OiB7IGZpbGVzIH1cclxuICAgIH0gPSBlO1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgIGZvcm1EYXRhLmFwcGVuZChcImZpbGVzXCIsIGZpbGVzWzBdKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgUE9TVChcIi9pbWFnZS91cGxvYWRcIiwgZm9ybURhdGEpO1xyXG4gICAgICBjb25zdCB7XHJcbiAgICAgICAgdXJsczogW3VybF1cclxuICAgICAgfSA9IGRhdGE7XHJcblxyXG4gICAgICBpY29uVVJMID0gdXJsO1xyXG4gICAgICBkcmF3SWNvbihpY29uUGFyZW50Tm9kZSwgdXJsKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctZm9ybVwiKS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGFzeW5jIGUgPT4ge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgY29uc3QgZGF0YTogRm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICBkYXRhLmFwcGVuZChcInRpdGxlXCIsIGdldEZpZWxkVmFsdWUoXCJ0aXRsZVwiKSk7XHJcbiAgZGF0YS5hcHBlbmQoXCJkZXNjcmlwdGlvblwiLCBnZXRGaWVsZFZhbHVlKFwiZGVzY3JpcHRpb25cIikpO1xyXG4gIGRhdGEuYXBwZW5kKFwiZ29vZ2xlLWxpbmtcIiwgZ2V0RmllbGRWYWx1ZShcImdvb2dsZS1saW5rXCIpKTtcclxuICBkYXRhLmFwcGVuZChcImljb25cIiwgaWNvblVSTCk7XHJcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBwcmVmZXItZm9yLW9mXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzY3JlZW5zaG90VVJMcy5sZW5ndGg7IGkrKykge1xyXG4gICAgZGF0YS5hcHBlbmQoXCJzY3JlZW5zaG90c1wiLCBzY3JlZW5zaG90VVJMc1tpXSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgYXdhaXQgZmV0Y2goXCIvcHJvamVjdFwiLCB7IGJvZHk6IGRhdGEsIG1ldGhvZDogXCJQT1NUXCIgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICB9XHJcbn0pO1xyXG5cclxuY29uc3QgZHJhZyA9IChlOiBIVE1MSW5wdXRFdmVudCwgdXJsOiBJU2NyZWVuc2hvdCkgPT5cclxuICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKFwidGV4dFwiLCBKU09OLnN0cmluZ2lmeSh1cmwpKTtcclxuXHJcbmNvbnN0IGRyb3AgPSAoZTogSFRNTElucHV0RXZlbnQsIGN1cnJlbnRVUkw6IElTY3JlZW5zaG90KSA9PiB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGNvbnN0IG5ld1VSTCA9IEpTT04ucGFyc2UoZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcInRleHRcIikpO1xyXG4gIGNvbnN0IG5ld1NjcmVlbnNob3RVUkxTID0gc2NyZWVuc2hvdFVSTHMubWFwKCh1cmwsIGluZGV4KSA9PiB7XHJcbiAgICBpZiAoaW5kZXggPT09IG5ld1VSTC5pbmRleCkge1xyXG4gICAgICByZXR1cm4gY3VycmVudFVSTC51cmw7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGluZGV4ID09PSBjdXJyZW50VVJMLmluZGV4KSB7XHJcbiAgICAgIHJldHVybiBuZXdVUkwudXJsO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB1cmw7XHJcbiAgfSk7XHJcbiAgc2NyZWVuc2hvdFVSTHMgPSBbLi4ubmV3U2NyZWVuc2hvdFVSTFNdO1xyXG5cclxuICBkcmF3U2NyZWVuc2hvdExpc3Qoc2NyZWVuc2hvdHNQYXJlbnROb2RlLCBuZXdTY3JlZW5zaG90VVJMUyk7XHJcbn07XHJcblxyXG5jb25zdCBkcmF3U2NyZWVuc2hvdExpc3QgPSAoc2NyZWVuc2hvdHNOb2RlOiBFbGVtZW50LCB1cmxzOiBzdHJpbmdbXSkgPT4ge1xyXG4gIHdoaWxlIChzY3JlZW5zaG90c05vZGUuZmlyc3RDaGlsZCkge1xyXG4gICAgc2NyZWVuc2hvdHNOb2RlLnJlbW92ZUNoaWxkKHNjcmVlbnNob3RzTm9kZS5maXJzdENoaWxkKTtcclxuICB9XHJcblxyXG4gIHVybHMuZm9yRWFjaCgodXJsLCBpbmRleCkgPT4ge1xyXG4gICAgY29uc3Qgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBjb25zdCBpbWdOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuXHJcbiAgICBub2RlLmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgIFwiY29sLTZcIixcclxuICAgICAgXCJjb2wtbWQtM1wiLFxyXG4gICAgICBcInNjcmVlbnNob3RzX19saXN0X19pdGVtXCIsXHJcbiAgICAgIGBzY3JlZW5zaG90c19fbGlzdF9faXRlbV9fJHtpbmRleH1gXHJcbiAgICApO1xyXG4gICAgbm9kZS5kcmFnZ2FibGUgPSB0cnVlO1xyXG4gICAgaW1nTm9kZS5zcmMgPSB1cmw7XHJcbiAgICBpbWdOb2RlLmFsdCA9IFwic2NyZWVuc2hvdFwiO1xyXG5cclxuICAgIG5vZGUuYXBwZW5kQ2hpbGQoaW1nTm9kZSk7XHJcbiAgICBzY3JlZW5zaG90c05vZGUuYXBwZW5kQ2hpbGQobm9kZSk7XHJcblxyXG4gICAgZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoYC5zY3JlZW5zaG90c19fbGlzdF9faXRlbV9fJHtpbmRleH1gKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCAoZTogSFRNTElucHV0RXZlbnQpID0+XHJcbiAgICAgICAgZHJhZyhlLCB7IGluZGV4LCB1cmwgfSlcclxuICAgICAgKTtcclxuXHJcbiAgICBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihgLnNjcmVlbnNob3RzX19saXN0X19pdGVtX18ke2luZGV4fWApXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCAoZTogSFRNTElucHV0RXZlbnQpID0+IGRyb3AoZSwgeyBpbmRleCwgdXJsIH0pKTtcclxuXHJcbiAgICBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihgLnNjcmVlbnNob3RzX19saXN0X19pdGVtX18ke2luZGV4fWApXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgKGU6IEhUTUxJbnB1dEV2ZW50KSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3QgZHJhd0ljb24gPSAoaWNvbk5vZGU6IEVsZW1lbnQsIHVybDogc3RyaW5nKSA9PiB7XHJcbiAgd2hpbGUgKGljb25Ob2RlLmZpcnN0Q2hpbGQpIHtcclxuICAgIGljb25Ob2RlLnJlbW92ZUNoaWxkKGljb25Ob2RlLmZpcnN0Q2hpbGQpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgaW1nTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgaW1nTm9kZS5jbGFzc0xpc3QuYWRkKFwiaWNvbl9faXRlbVwiKTtcclxuICBpbWdOb2RlLnNyYyA9IHVybDtcclxuICBpbWdOb2RlLmFsdCA9IFwic2NyZWVuc2hvdFwiO1xyXG4gIGljb25Ob2RlLmFwcGVuZENoaWxkKGltZ05vZGUpO1xyXG59O1xyXG4iLCJleHBvcnQgY29uc3QgUE9TVCA9ICh1cmw6IHN0cmluZywgZGF0YTogRm9ybURhdGEpID0+XHJcbiAgZmV0Y2godXJsLCB7XHJcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgYm9keTogZGF0YVxyXG4gIH0pLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpO1xyXG5cclxuZXhwb3J0IGNvbnN0IEdFVCA9ICh1cmw6IHN0cmluZykgPT4gZmV0Y2godXJsKS50aGVuKHJlcyA9PiByZXMuanNvbigpKTtcclxuXHJcbmV4cG9ydCBjb25zdCBQVVQgPSAodXJsOiBzdHJpbmcsIGRhdGE6IEZvcm1EYXRhKSA9PlxyXG4gIGZldGNoKHVybCwge1xyXG4gICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgYm9keTogZGF0YVxyXG4gIH0pLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpO1xyXG5cclxuZXhwb3J0IGNvbnN0IERFTEVURSA9ICh1cmw6IHN0cmluZykgPT5cclxuICBmZXRjaCh1cmwsIHsgbWV0aG9kOiBcIkRFTEVURVwiIH0pLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpO1xyXG4iXX0=
